[{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\.expo\\types\\router.d.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'T' is defined but never used.","line":8,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\app\\(tabs)\\_layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\app\\(tabs)\\explore.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":47,"column":6,"nodeType":"ArrayExpression","endLine":47,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData]","fix":{"range":[1828,1830],"text":"[fetchData]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":52,"column":6,"nodeType":"ArrayExpression","endLine":52,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData]","fix":{"range":[1921,1923],"text":"[fetchData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTheme } from '@/context/ThemeContext';\nimport { useRouter } from 'expo-router';\nimport { StatusBar } from 'expo-status-bar';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { ActivityIndicator, FlatList, RefreshControl, ScrollView, StyleSheet, Text, TouchableOpacity, View } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { AttendanceService, DailyAttendance } from '../../services/attendance';\nimport { AuthService } from '../../services/auth';\n\nexport default function DateWiseScreen() {\n  const [days, setDays] = useState<DailyAttendance[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [selectedMonth, setSelectedMonth] = useState<string>('All');\n  const router = useRouter();\n  const insets = useSafeAreaInsets();\n  const { colors, isDark } = useTheme();\n\n  const fetchData = async () => {\n    try {\n      const isLoggedIn = await AuthService.isLoggedIn();\n      if (!isLoggedIn) {\n        router.replace('/login');\n        return;\n      }\n\n      const data = await AttendanceService.getDateWiseAttendance();\n      // Sort in descending order (newest first)\n      const sortedDays = data.days.sort((a, b) => {\n        const [dayA, monthA, yearA] = a.date.split('-').map(Number);\n        const [dayB, monthB, yearB] = b.date.split('-').map(Number);\n        const dateA = new Date(yearA, monthA - 1, dayA);\n        const dateB = new Date(yearB, monthB - 1, dayB);\n        return dateB.getTime() - dateA.getTime();\n      });\n      setDays(sortedDays);\n    } catch (error) {\n      console.error('Date-wise attendance fetch error:', error);\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const onRefresh = useCallback(() => {\n    setRefreshing(true);\n    fetchData();\n  }, []);\n\n  // Extract unique months from the data\n  const months = useMemo(() => {\n    const monthSet = new Set<string>();\n    days.forEach(day => {\n      const parts = day.date.split('-');\n      if (parts.length >= 3) {\n        const monthNum = parseInt(parts[1], 10);\n        const year = parts[2];\n        const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n        const monthName = monthNames[monthNum - 1] || 'Unknown';\n        monthSet.add(`${monthName} ${year}`);\n      }\n    });\n    return ['All', ...Array.from(monthSet)];\n  }, [days]);\n\n  // Filter days by selected month\n  const filteredDays = useMemo(() => {\n    if (selectedMonth === 'All') return days;\n\n    return days.filter(day => {\n      const parts = day.date.split('-');\n      if (parts.length >= 3) {\n        const monthNum = parseInt(parts[1], 10);\n        const year = parts[2];\n        const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n        const monthName = monthNames[monthNum - 1] || 'Unknown';\n        return selectedMonth === `${monthName} ${year}`;\n      }\n      return false;\n    });\n  }, [days, selectedMonth]);\n\n  if (loading) {\n    return (\n      <View style={[styles.centerContainer, { backgroundColor: colors.background }]}>\n        <ActivityIndicator size=\"large\" color={colors.primary} />\n      </View>\n    );\n  }\n\n  const renderPeriodCell = (status: string, index: number) => {\n    let bgColor = isDark ? '#3a3a5e' : '#E5E5EA';\n    let textColor = colors.textSecondary;\n\n    if (status === 'P') {\n      bgColor = colors.successBg;\n      textColor = colors.success;\n    } else if (status === 'A') {\n      bgColor = colors.errorBg;\n      textColor = colors.error;\n    }\n\n    return (\n      <View key={index} style={[styles.periodCell, { backgroundColor: bgColor }]}>\n        <Text style={[styles.periodText, { color: textColor }]}>{status}</Text>\n      </View>\n    );\n  };\n\n  const renderDayItem = ({ item }: { item: DailyAttendance }) => {\n    const presentCount = item.periods.filter(p => p === 'P').length;\n    const absentCount = item.periods.filter(p => p === 'A').length;\n    const isGood = absentCount === 0;\n\n    return (\n      <View style={[styles.dayCard, { backgroundColor: colors.card }]}>\n        <View style={[styles.dayAccent, { backgroundColor: isGood ? colors.success : colors.error }]} />\n        <View style={styles.dayContent}>\n          <View style={styles.dayHeader}>\n            <Text style={[styles.dateText, { color: colors.text }]}>{item.date}</Text>\n            <Text style={[styles.dayText, { color: colors.textSecondary }]}>{item.day}</Text>\n          </View>\n          <View style={styles.periodsRow}>\n            {item.periods.map((status, index) => renderPeriodCell(status, index))}\n          </View>\n          <View style={styles.statsRow}>\n            <Text style={styles.statText}>\n              <Text style={{ color: colors.success }}>P: {presentCount}</Text>\n              {'  '}\n              <Text style={{ color: colors.error }}>A: {absentCount}</Text>\n            </Text>\n          </View>\n        </View>\n      </View>\n    );\n  };\n\n  return (\n    <View style={[styles.container, { paddingTop: insets.top, backgroundColor: colors.background }]}>\n      <StatusBar style={isDark ? \"light\" : \"dark\"} />\n\n      <FlatList\n        data={filteredDays}\n        keyExtractor={(item, index) => `${item.date}-${index}`}\n        renderItem={renderDayItem}\n        contentContainerStyle={styles.listContent}\n        refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={colors.text} />}\n        ListHeaderComponent={() => (\n          <View>\n            {/* Title */}\n            <View style={styles.header}>\n              <Text style={[styles.headerTitle, { color: colors.text }]}>Date-wise Attendance</Text>\n              <Text style={[styles.headerCount, { color: colors.textSecondary }]}>{filteredDays.length} days</Text>\n            </View>\n\n            {/* Month Filter */}\n            <ScrollView\n              horizontal\n              showsHorizontalScrollIndicator={false}\n              style={styles.filterContainer}\n              contentContainerStyle={styles.filterScroll}\n            >\n              {months.map((month) => (\n                <TouchableOpacity\n                  key={month}\n                  style={[\n                    styles.filterChip,\n                    { backgroundColor: colors.badge },\n                    selectedMonth === month && { backgroundColor: colors.primary }\n                  ]}\n                  onPress={() => setSelectedMonth(month)}\n                >\n                  <Text style={[\n                    styles.filterChipText,\n                    { color: colors.textSecondary },\n                    selectedMonth === month && { color: '#fff' }\n                  ]}>\n                    {month}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </ScrollView>\n\n            {/* Period Legend */}\n            <View style={[styles.legendCard, { backgroundColor: colors.card }]}>\n              <Text style={[styles.legendTitle, { color: colors.textSecondary }]}>Periods</Text>\n              <View style={styles.legendRow}>\n                {['P1', 'P2', 'P3', 'P4', 'P5', 'P6'].map((p, i) => (\n                  <View key={i} style={[styles.legendItem, { backgroundColor: isDark ? '#3a3a5e' : '#E5E5EA' }]}>\n                    <Text style={[styles.legendText, { color: colors.text }]}>{p}</Text>\n                  </View>\n                ))}\n              </View>\n            </View>\n          </View>\n        )}\n        ListEmptyComponent={() => (\n          <View style={styles.emptyContainer}>\n            <Text style={[styles.emptyText, { color: colors.textSecondary }]}>No attendance records found</Text>\n          </View>\n        )}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  centerContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  listContent: {\n    padding: 16,\n    paddingBottom: 100,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  headerTitle: {\n    fontSize: 22,\n    fontWeight: 'bold',\n  },\n  headerCount: {\n    fontSize: 14,\n  },\n  filterContainer: {\n    marginBottom: 20,\n  },\n  filterScroll: {\n    paddingRight: 16,\n  },\n  filterChip: {\n    paddingHorizontal: 16,\n    paddingVertical: 10,\n    borderRadius: 20,\n    marginRight: 10,\n  },\n  filterChipText: {\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  legendCard: {\n    borderRadius: 16,\n    padding: 16,\n    marginBottom: 20,\n  },\n  legendTitle: {\n    fontSize: 14,\n    marginBottom: 12,\n  },\n  legendRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n  },\n  legendItem: {\n    width: 40,\n    height: 32,\n    borderRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  legendText: {\n    fontSize: 12,\n    fontWeight: '600',\n  },\n  dayCard: {\n    borderRadius: 16,\n    flexDirection: 'row',\n    marginBottom: 12,\n    overflow: 'hidden',\n  },\n  dayAccent: {\n    width: 5,\n  },\n  dayContent: {\n    flex: 1,\n    padding: 16,\n  },\n  dayHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  dateText: {\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  dayText: {\n    fontSize: 14,\n  },\n  periodsRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 10,\n  },\n  periodCell: {\n    width: 44,\n    height: 36,\n    borderRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  periodText: {\n    fontSize: 14,\n    fontWeight: 'bold',\n  },\n  statsRow: {\n    alignItems: 'flex-end',\n  },\n  statText: {\n    fontSize: 12,\n  },\n  emptyContainer: {\n    padding: 40,\n    alignItems: 'center',\n  },\n  emptyText: {\n    fontSize: 16,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\app\\(tabs)\\index.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":51,"column":6,"nodeType":"ArrayExpression","endLine":51,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData]","fix":{"range":[1899,1901],"text":"[fetchData]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":56,"column":6,"nodeType":"ArrayExpression","endLine":56,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData]","fix":{"range":[1992,1994],"text":"[fetchData]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":93,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":93,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'atRiskMonths' is assigned a value but never used.","line":259,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":259,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTheme } from '@/context/ThemeContext';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useRouter } from 'expo-router';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { ActivityIndicator, FlatList, Image, RefreshControl, ScrollView, StyleSheet, Text, TouchableOpacity, View } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { AttendanceResponse, AttendanceService, MonthlyAttendance } from '../../services/attendance';\nimport { AuthService, StudentProfile } from '../../services/auth';\nimport { getTargetPercentage, saveTargetPercentage } from '../../utils/storage';\n\nexport default function HomeScreen() {\n  const [attendanceData, setAttendanceData] = useState<AttendanceResponse | null>(null);\n  const [profile, setProfile] = useState<StudentProfile | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [targetPercentage, setTargetPercentage] = useState(75);\n\n  const [loggingOut, setLoggingOut] = useState(false);\n  const router = useRouter();\n  const insets = useSafeAreaInsets();\n  const { colors, toggleTheme, isDark } = useTheme();\n\n  const fetchData = async () => {\n    try {\n      const isLoggedIn = await AuthService.isLoggedIn();\n      if (!isLoggedIn) {\n        router.replace('/login');\n        return;\n      }\n\n      const userProfile = await AuthService.getProfile();\n      setProfile(userProfile);\n\n      const data = await AttendanceService.getAttendance();\n      setAttendanceData(data);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  useEffect(() => {\n    const loadData = async () => {\n      const savedTarget = await getTargetPercentage();\n      setTargetPercentage(savedTarget);\n      fetchData();\n    };\n    loadData();\n  }, []);\n\n  const onRefresh = useCallback(() => {\n    setRefreshing(true);\n    fetchData();\n  }, []);\n\n  const handleTargetChange = async (percentage: number) => {\n    setTargetPercentage(percentage);\n    await saveTargetPercentage(percentage);\n  };\n\n  const handleLogout = async () => {\n    // Safety fallback: if everything hangs, force navigation after 3 seconds\n    const forceTimer = setTimeout(() => {\n      console.log('Force navigation triggered');\n      if (mounted.current) setLoggingOut(false);\n      router.replace('/');\n    }, 3000);\n\n    try {\n      setLoggingOut(true);\n      console.log('Logout initiated');\n\n      // Race the logout against a 1.5-second timeout (improved responsiveness)\n      const logoutPromise = AuthService.logout()\n        .catch(err => console.error('AuthService logout error:', err));\n\n      const timeoutPromise = new Promise(resolve => setTimeout(resolve, 1500));\n\n      await Promise.race([logoutPromise, timeoutPromise]);\n      console.log('Logout op finished (or timed out)');\n\n      // Cancel the force timer as we are about to navigate normally\n      clearTimeout(forceTimer);\n\n      // Add a small delay to ensure state updates settle before navigation\n      setTimeout(() => {\n        console.log('Executing navigation to /');\n        if (mounted.current) setLoggingOut(false);\n        try {\n          if (router.canDismiss()) router.dismissAll();\n        } catch (e) {\n          // ignore\n        }\n        router.replace('/login');\n      }, 100);\n\n    } catch (error) {\n      console.error('Logout handler failed:', error);\n      router.replace('/login');\n    }\n  };\n\n  // Keep track of mount state to avoid state updates on unmount\n  const mounted = React.useRef(true);\n  useEffect(() => {\n    return () => { mounted.current = false; };\n  }, []);\n\n  const getGreeting = () => {\n    const hour = new Date().getHours();\n    if (hour < 12) return 'Good Morning';\n    if (hour < 17) return 'Good Afternoon';\n    return 'Good Evening';\n  };\n\n  const headerComponent = (\n    <View>\n      {/* Header */}\n      <View style={styles.header}>\n        <View>\n          <Text style={[styles.welcomeText, { color: colors.textSecondary }]}>{getGreeting()},</Text>\n          <Text style={[styles.headerTitle, { color: colors.text }]}>{profile?.name?.split(' ')[0] || 'Student'}</Text>\n        </View>\n        <View style={{ flexDirection: 'row', gap: 10 }}>\n          <TouchableOpacity onPress={toggleTheme} style={[styles.iconBtn, { borderColor: colors.cardBorder, backgroundColor: colors.card }]}>\n            <Ionicons name={isDark ? \"sunny\" : \"moon\"} size={20} color={colors.text} />\n          </TouchableOpacity>\n          <TouchableOpacity\n            onPress={handleLogout}\n            disabled={loggingOut}\n            style={[styles.iconBtn, { borderColor: 'rgba(255, 69, 58, 0.3)', backgroundColor: colors.errorBg }]}\n          >\n            {loggingOut ? (\n              <ActivityIndicator size=\"small\" color={colors.error} />\n            ) : (\n              <Ionicons name=\"power\" size={20} color={colors.error} />\n            )}\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      {/* Profile Card */}\n      <View style={[styles.profileCard, { backgroundColor: colors.card }]}>\n        <Image\n          source={{ uri: profile?.profileImage || 'https://via.placeholder.com/60' }}\n          style={[styles.profileImage, { backgroundColor: colors.badge, borderColor: colors.success }]}\n        />\n        <View style={styles.profileInfo}>\n          <Text style={[styles.profileName, { color: colors.text }]}>{profile?.name || 'Student'}</Text>\n          <Text style={[styles.profileDept, { color: colors.textSecondary }]}>{profile?.department || 'Department'}</Text>\n          <View style={styles.badgesRow}>\n            <View style={[styles.badge, { backgroundColor: colors.badge }]}>\n              <Text style={[styles.badgeText, { color: colors.badgeText }]}>Year {profile?.year || '-'}</Text>\n            </View>\n            <View style={[styles.badge, { backgroundColor: colors.badge }]}>\n              <Text style={[styles.badgeText, { color: colors.badgeText }]}>ID: {profile?.rollNo}</Text>\n            </View>\n          </View>\n        </View>\n      </View>\n\n      {/* Target Percentage Selector */}\n      <View style={[styles.targetSelectorCard, { backgroundColor: colors.card }]}>\n        <Text style={[styles.targetLabel, { color: colors.textSecondary }]}>Target Attendance</Text>\n        <ScrollView\n          horizontal\n          showsHorizontalScrollIndicator={false}\n          contentContainerStyle={styles.targetOptions}\n        >\n          {[75, 80, 85, 90, 95].map((pct) => (\n            <TouchableOpacity\n              key={pct}\n              style={[\n                styles.targetChip,\n                { backgroundColor: colors.badge, borderColor: colors.cardBorder },\n                targetPercentage === pct && { backgroundColor: colors.primary, borderColor: colors.primary }\n              ]}\n              onPress={() => handleTargetChange(pct)}\n            >\n              <Text style={[\n                styles.targetChipText,\n                { color: colors.textSecondary },\n                targetPercentage === pct && styles.targetChipTextActive\n              ]}>\n                {pct}%\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n      </View>\n\n      {/* Stats Row */}\n      <View style={styles.statsRow}>\n        <View style={[styles.statCard, { backgroundColor: colors.card }]}>\n          <View style={styles.statHeader}>\n            <Ionicons name=\"checkmark-circle\" size={16} color={colors.success} style={{ marginRight: 6 }} />\n            <Text style={[styles.statLabel, { color: colors.textSecondary }]}>OVERALL</Text>\n          </View>\n          <Text style={[styles.statValue, { color: (attendanceData?.overallPercentage || 0) >= targetPercentage ? colors.success : colors.error }]}>\n            {attendanceData?.overallPercentage.toFixed(0)}%\n          </Text>\n          <Text style={[styles.statSubtext, { color: colors.textSecondary }]}>Total Attendance</Text>\n        </View>\n        <View style={[styles.statCard, { backgroundColor: colors.card }]}>\n          <View style={styles.statHeader}>\n            <Ionicons\n              name={(attendanceData?.overallPercentage || 0) >= targetPercentage ? \"trending-up\" : \"warning\"}\n              size={16}\n              color={(attendanceData?.overallPercentage || 0) >= targetPercentage ? colors.success : colors.warning}\n              style={{ marginRight: 6 }}\n            />\n            <Text style={[styles.statLabel, { color: colors.textSecondary }]}>PREDICTION ({targetPercentage}%)</Text>\n          </View>\n          {(() => {\n            const attended = attendanceData?.semesterTotal?.attended || 0;\n            const total = attendanceData?.semesterTotal?.total || 0;\n            const percentage = attendanceData?.overallPercentage || 0;\n            const targetDecimal = targetPercentage / 100;\n\n            if (percentage >= targetPercentage) {\n              const canSkip = Math.floor((attended - targetDecimal * total) / targetDecimal);\n              return (\n                <>\n                  <Text style={[styles.statValue, { color: colors.success, fontSize: 32 }]}>{canSkip}</Text>\n                  <Text style={[styles.statSubtext, { color: colors.textSecondary }]}>classes you can skip</Text>\n                </>\n              );\n            } else {\n              const needed = Math.ceil((targetDecimal * total - attended) / (1 - targetDecimal));\n              return (\n                <>\n                  <Text style={[styles.statValue, { color: colors.error, fontSize: 32 }]}>{needed}</Text>\n                  <Text style={[styles.statSubtext, { color: colors.textSecondary }]}>classes to attend</Text>\n                </>\n              );\n            }\n          })()}\n        </View>\n      </View>\n\n      {/* Section Title */}\n      <View style={styles.sectionHeader}>\n        <Text style={[styles.sectionTitle, { color: colors.text }]}>Monthly Attendance</Text>\n      </View>\n    </View>\n  );\n\n  if (loading) {\n    return (\n      <View style={[styles.centerContainer, { backgroundColor: colors.background }]}>\n        <ActivityIndicator size=\"large\" color={colors.primary} />\n      </View>\n    );\n  }\n\n  // Calculate at-risk months (below 75%)\n  const atRiskMonths = attendanceData?.months.filter(m => m.percentage < 75).length || 0;\n\n  const getColor = (pct: number) => {\n    if (pct >= 75) return colors.success;\n    if (pct >= 60) return colors.warning;\n    return colors.error;\n  };\n\n  const CircularProgress = ({ percentage, size = 56 }: { percentage: number; size?: number }) => {\n    const color = getColor(percentage);\n\n    return (\n      <View style={[styles.circleOuter, { width: size, height: size, borderColor: colors.badge }]}>\n        <View style={[styles.circleInner, {\n          width: size - 8,\n          height: size - 8,\n          borderColor: color,\n          borderTopColor: percentage < 25 ? colors.badge : color,\n          borderRightColor: percentage < 50 ? colors.badge : color,\n          borderBottomColor: percentage < 75 ? colors.badge : color,\n          backgroundColor: colors.card,\n        }]}>\n          <Text style={[styles.circleText, { color }]}>{Math.round(percentage)}%</Text>\n        </View>\n      </View>\n    );\n  };\n\n  const renderMonthItem = ({ item }: { item: MonthlyAttendance }) => {\n    const isLow = item.percentage < 75;\n    const isWarning = item.percentage >= 75 && item.percentage < 85;\n\n    return (\n      <View style={[styles.subjectCard, { backgroundColor: colors.card }]}>\n        <View style={styles.subjectContent}>\n          <Text style={[styles.subjectName, { color: colors.text }]}>{item.month}</Text>\n          <Text style={[styles.subjectDetails, { color: colors.textSecondary }]}>\n            {item.attended} / {item.total} classes\n          </Text>\n          <View style={[styles.statusBadge, {\n            backgroundColor: isLow ? colors.errorBg : isWarning ? colors.warningBg : colors.successBg\n          }]}>\n            <Text style={[styles.statusText, {\n              color: isLow ? colors.error : isWarning ? colors.warning : colors.success\n            }]}>\n              {isLow ? 'Low' : isWarning ? 'Warning' : 'Safe'}\n            </Text>\n          </View>\n        </View>\n        <CircularProgress percentage={item.percentage} />\n      </View>\n    );\n  };\n\n  return (\n    <View style={[styles.container, { paddingTop: insets.top, backgroundColor: colors.background }]}>\n      <FlatList\n        data={attendanceData?.months ? [...attendanceData.months].reverse() : []}\n        keyExtractor={(item) => item.month}\n        renderItem={renderMonthItem}\n        contentContainerStyle={styles.listContent}\n        refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={colors.text} />}\n        ListHeaderComponent={headerComponent}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  centerContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  listContent: {\n    padding: 16,\n    paddingBottom: 100,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 24,\n  },\n  welcomeText: {\n    fontSize: 14,\n  },\n  headerTitle: {\n    fontSize: 28,\n    fontWeight: 'bold',\n  },\n  iconBtn: {\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    borderWidth: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  profileCard: {\n    borderRadius: 16,\n    padding: 16,\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  profileImage: {\n    width: 60,\n    height: 60,\n    borderRadius: 30,\n    borderWidth: 2,\n  },\n  profileInfo: {\n    marginLeft: 14,\n    flex: 1,\n  },\n  profileName: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    textTransform: 'capitalize',\n  },\n  profileDept: {\n    fontSize: 13,\n    marginBottom: 8,\n  },\n  badgesRow: {\n    flexDirection: 'row',\n  },\n  badge: {\n    paddingHorizontal: 10,\n    paddingVertical: 4,\n    borderRadius: 12,\n    marginRight: 8,\n  },\n  badgeText: {\n    fontSize: 11,\n    fontWeight: '500',\n  },\n  statsRow: {\n    flexDirection: 'row',\n    gap: 12,\n    marginBottom: 24,\n  },\n  statCard: {\n    flex: 1,\n    borderRadius: 16,\n    padding: 16,\n  },\n  statHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  statLabel: {\n    fontSize: 11,\n    fontWeight: '600',\n  },\n  statValue: {\n    fontSize: 36,\n    fontWeight: 'bold',\n  },\n  statSubtext: {\n    fontSize: 12,\n    marginTop: 4,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  sectionTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n  },\n  subjectCard: {\n    borderRadius: 16,\n    padding: 16,\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  subjectContent: {\n    flex: 1,\n  },\n  subjectName: {\n    fontSize: 17,\n    fontWeight: 'bold',\n    marginBottom: 2,\n  },\n  subjectDetails: {\n    fontSize: 13,\n    marginBottom: 8,\n  },\n  statusBadge: {\n    alignSelf: 'flex-start',\n    paddingHorizontal: 10,\n    paddingVertical: 4,\n    borderRadius: 10,\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '600',\n  },\n  circleOuter: {\n    borderRadius: 30,\n    borderWidth: 4,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  circleInner: {\n    borderRadius: 26,\n    borderWidth: 3,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  circleText: {\n    fontSize: 12,\n    fontWeight: 'bold',\n  },\n  targetSelectorCard: {\n    borderRadius: 16,\n    padding: 16,\n    marginBottom: 16,\n  },\n  targetLabel: {\n    fontSize: 14,\n    marginBottom: 12,\n    fontWeight: '600',\n  },\n  targetOptions: {\n    flexDirection: 'row',\n    gap: 10,\n  },\n  targetChip: {\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 20,\n    borderWidth: 1,\n  },\n  targetChipText: {\n    fontSize: 15,\n    fontWeight: '600',\n  },\n  targetChipTextActive: {\n    color: '#fff',\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\app\\_layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\app\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\app\\login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\app\\modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\components\\animated-tab-bar.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'activeIndex'. Either include it or remove the dependency array.","line":47,"column":8,"nodeType":"ArrayExpression","endLine":47,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [activeIndex, state.index]","fix":{"range":[1359,1372],"text":"[activeIndex, state.index]"}}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useAnimatedStyle\" cannot be called inside a callback. React Hooks must be called in a React function component or a custom React Hook function.","line":76,"column":45,"nodeType":"Identifier","endLine":76,"endColumn":61},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useAnimatedStyle\" cannot be called inside a callback. React Hooks must be called in a React function component or a custom React Hook function.","line":97,"column":47,"nodeType":"Identifier","endLine":97,"endColumn":63},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useAnimatedStyle\" cannot be called inside a callback. React Hooks must be called in a React function component or a custom React Hook function.","line":111,"column":48,"nodeType":"Identifier","endLine":111,"endColumn":64}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Ionicons } from '@expo/vector-icons';\r\nimport { BottomTabBarProps } from '@react-navigation/bottom-tabs';\r\nimport * as Haptics from 'expo-haptics';\r\nimport React from 'react';\r\nimport { Pressable, StyleSheet, View } from 'react-native';\r\nimport Animated, {\r\n    Extrapolation,\r\n    interpolate,\r\n    interpolateColor,\r\n    useAnimatedStyle,\r\n    useSharedValue,\r\n    withSpring,\r\n} from 'react-native-reanimated';\r\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\r\n\r\ninterface TabConfig {\r\n    icon: keyof typeof Ionicons.glyphMap;\r\n    activeIcon: keyof typeof Ionicons.glyphMap;\r\n    label: string;\r\n}\r\n\r\nconst TAB_CONFIG: Record<string, TabConfig> = {\r\n    index: {\r\n        icon: 'home-outline',\r\n        activeIcon: 'home',\r\n        label: 'Home',\r\n    },\r\n    explore: {\r\n        icon: 'calendar-outline',\r\n        activeIcon: 'calendar',\r\n        label: 'Calendar',\r\n    },\r\n};\r\n\r\nconst AnimatedPressable = Animated.createAnimatedComponent(Pressable);\r\n\r\nexport function AnimatedTabBar({ state, descriptors, navigation }: BottomTabBarProps) {\r\n    const activeIndex = useSharedValue(state.index);\r\n    const insets = useSafeAreaInsets();\r\n\r\n    React.useEffect(() => {\r\n        activeIndex.value = withSpring(state.index, {\r\n            damping: 18,\r\n            stiffness: 180,\r\n            mass: 0.6,\r\n        });\r\n    }, [state.index]);\r\n\r\n    return (\r\n        <View style={[styles.container, { bottom: 20 + insets.bottom }]}>\r\n            <View style={styles.tabBar}>\r\n                {state.routes.map((route, index) => {\r\n                    const { options } = descriptors[route.key];\r\n                    const isFocused = state.index === index;\r\n                    const config = TAB_CONFIG[route.name] || {\r\n                        icon: 'ellipse-outline' as const,\r\n                        activeIcon: 'ellipse' as const,\r\n                        label: options.title || route.name,\r\n                    };\r\n\r\n                    const onPress = () => {\r\n                        Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\r\n\r\n                        const event = navigation.emit({\r\n                            type: 'tabPress',\r\n                            target: route.key,\r\n                            canPreventDefault: true,\r\n                        });\r\n\r\n                        if (!isFocused && !event.defaultPrevented) {\r\n                            navigation.navigate(route.name);\r\n                        }\r\n                    };\r\n\r\n                    // Animated background style\r\n                    const animatedBgStyle = useAnimatedStyle(() => {\r\n                        const backgroundColor = interpolateColor(\r\n                            activeIndex.value,\r\n                            [index - 0.5, index, index + 0.5],\r\n                            ['transparent', '#3a3a3c', 'transparent']\r\n                        );\r\n\r\n                        const scale = interpolate(\r\n                            activeIndex.value,\r\n                            [index - 1, index, index + 1],\r\n                            [0.95, 1, 0.95],\r\n                            Extrapolation.CLAMP\r\n                        );\r\n\r\n                        return {\r\n                            backgroundColor,\r\n                            transform: [{ scale }],\r\n                        };\r\n                    });\r\n\r\n                    // Animated icon style\r\n                    const animatedIconStyle = useAnimatedStyle(() => {\r\n                        const scale = interpolate(\r\n                            activeIndex.value,\r\n                            [index - 0.3, index, index + 0.3],\r\n                            [1, 1.1, 1],\r\n                            Extrapolation.CLAMP\r\n                        );\r\n\r\n                        return {\r\n                            transform: [{ scale }],\r\n                        };\r\n                    });\r\n\r\n                    // Animated label style\r\n                    const animatedLabelStyle = useAnimatedStyle(() => {\r\n                        const opacity = interpolate(\r\n                            activeIndex.value,\r\n                            [index - 0.4, index, index + 0.4],\r\n                            [0, 1, 0],\r\n                            Extrapolation.CLAMP\r\n                        );\r\n                        const translateX = interpolate(\r\n                            activeIndex.value,\r\n                            [index - 0.4, index, index + 0.4],\r\n                            [-5, 0, 5],\r\n                            Extrapolation.CLAMP\r\n                        );\r\n\r\n                        return {\r\n                            opacity,\r\n                            transform: [{ translateX }],\r\n                        };\r\n                    });\r\n\r\n                    return (\r\n                        <AnimatedPressable\r\n                            key={route.key}\r\n                            accessibilityRole=\"button\"\r\n                            accessibilityState={isFocused ? { selected: true } : {}}\r\n                            accessibilityLabel={options.tabBarAccessibilityLabel}\r\n                            onPress={onPress}\r\n                            style={[styles.tab, animatedBgStyle]}\r\n                        >\r\n                            <Animated.View style={animatedIconStyle}>\r\n                                <Ionicons\r\n                                    name={isFocused ? config.activeIcon : config.icon}\r\n                                    size={22}\r\n                                    color={isFocused ? '#fff' : '#666'}\r\n                                />\r\n                            </Animated.View>\r\n                            {isFocused && (\r\n                                <Animated.Text style={[styles.label, animatedLabelStyle]}>\r\n                                    {config.label}\r\n                                </Animated.Text>\r\n                            )}\r\n                        </AnimatedPressable>\r\n                    );\r\n                })}\r\n            </View>\r\n        </View>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        position: 'absolute',\r\n        left: 0,\r\n        right: 0,\r\n        alignItems: 'center',\r\n        paddingHorizontal: 60,\r\n    },\r\n    tabBar: {\r\n        flexDirection: 'row',\r\n        backgroundColor: '#1c1c1e',\r\n        borderRadius: 30,\r\n        paddingHorizontal: 8,\r\n        paddingVertical: 8,\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        gap: 6,\r\n        shadowColor: '#000',\r\n        shadowOffset: { width: 0, height: 6 },\r\n        shadowOpacity: 0.3,\r\n        shadowRadius: 12,\r\n        elevation: 10,\r\n        borderWidth: 1,\r\n        borderColor: 'rgba(255,255,255,0.1)',\r\n    },\r\n    tab: {\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        height: 46,\r\n        paddingHorizontal: 18,\r\n        borderRadius: 23,\r\n        gap: 8,\r\n    },\r\n    label: {\r\n        color: '#fff',\r\n        fontSize: 14,\r\n        fontWeight: '600',\r\n    },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\components\\external-link.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\components\\haptic-tab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\components\\hello-wave.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\components\\parallax-scroll-view.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\components\\themed-text.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\components\\themed-view.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\components\\ui\\icon-symbol.ios.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\components\\ui\\icon-symbol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\constants\\theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\context\\ThemeContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\expo-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\hooks\\use-color-scheme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\hooks\\use-color-scheme.web.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\hooks\\use-theme-color.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\scripts\\reset-project.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\services\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\services\\attendance.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":1,"column":17,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":48},{"ruleId":"import/first","severity":1,"message":"Import in body of module; reorder to top.","line":2,"column":1,"nodeType":"ImportDeclaration","endLine":2,"endColumn":25,"fix":{"range":[74,74],"text":""}},{"ruleId":"import/first","severity":1,"message":"Import in body of module; reorder to top.","line":3,"column":1,"nodeType":"ImportDeclaration","endLine":3,"endColumn":38,"fix":{"range":[0,113],"text":"import api from './api';\r\nimport { AuthService } from './auth';\r\nconst cheerio = require('react-native-cheerio');"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":2,"source":"const cheerio = require('react-native-cheerio');\r\nimport api from './api';\r\nimport { AuthService } from './auth';\r\n\r\nexport interface MonthlyAttendance {\r\n    month: string;\r\n    attended: number;\r\n    total: number;\r\n    percentage: number;\r\n}\r\n\r\nexport interface AttendanceResponse {\r\n    overallPercentage: number;\r\n    semesterTotal: {\r\n        attended: number;\r\n        total: number;\r\n    };\r\n    months: MonthlyAttendance[];\r\n}\r\n\r\nexport interface DailyAttendance {\r\n    date: string;\r\n    day: string;\r\n    periods: string[]; // Array of 'P', 'A', or '-' for each period\r\n}\r\n\r\nexport interface DateWiseResponse {\r\n    days: DailyAttendance[];\r\n}\r\n\r\nexport const AttendanceService = {\r\n    getAttendance: async (): Promise<AttendanceResponse> => {\r\n        try {\r\n            console.log('Fetching attendance page...');\r\n            let response = await api.get('/Student/Date_wise_attendance.php');\r\n            let html = response.data;\r\n\r\n            // Check if session expired\r\n            if (html.includes('login.php') || html.includes('Enter Roll No') || html.includes('type=\"password\"')) {\r\n                console.log('Session expired, re-authenticating...');\r\n\r\n                const credentials = await AuthService.getCredentials();\r\n                if (!credentials) throw new Error('Not logged in');\r\n\r\n                await AuthService.login(credentials.studentId, credentials.pass);\r\n\r\n                // Retry fetch\r\n                console.log('Retrying attendance page fetch...');\r\n                response = await api.get('/Student/Date_wise_attendance.php');\r\n                html = response.data;\r\n            }\r\n\r\n            console.log('Parsing attendance HTML, length:', html.length);\r\n            const $ = cheerio.load(html);\r\n\r\n            const months: MonthlyAttendance[] = [];\r\n            let semesterTotal = { attended: 0, total: 0 };\r\n            let overallPercentage = 0;\r\n\r\n            // Try multiple selectors for summary table\r\n            let summaryTable = $('.summary-table');\r\n            if (summaryTable.length === 0) {\r\n                summaryTable = $('table').filter((i: number, el: any) => {\r\n                    const text = $(el).text();\r\n                    return text.includes('Month') && text.includes('Classes Attended');\r\n                });\r\n            }\r\n\r\n            if (summaryTable.length === 0) {\r\n                console.log('Summary table not found. Page title:', $('title').text());\r\n                // Don't throw immediately if we have some other data, or maybe we do want to throw?\r\n                // For now let's keep it strict but maybe user is new? \r\n                // Actually if it's new user they might not have attendance yet.\r\n                // But let's assume if we are here we should have it.\r\n                // console.log('HTML snippet:', html.substring(0, 500));\r\n                // throw new Error('Attendance summary table not found');\r\n            }\r\n\r\n            summaryTable.find('tbody tr').each((i: number, el: any) => {\r\n                const tds = $(el).find('td');\r\n                const firstColText = $(tds[0]).text().trim();\r\n\r\n                if (firstColText.includes('Semester Total')) {\r\n                    const attended = parseInt($(tds[1]).text().trim(), 10);\r\n                    const total = parseInt($(tds[2]).text().trim(), 10);\r\n                    const percentStr = $(tds[3]).text().trim().replace('%', '');\r\n\r\n                    semesterTotal = { attended, total };\r\n                    overallPercentage = parseFloat(percentStr);\r\n                } else if (firstColText && !firstColText.includes('Month')) {\r\n                    const month = firstColText;\r\n                    const attended = parseInt($(tds[1]).text().trim(), 10) || 0;\r\n                    const total = parseInt($(tds[2]).text().trim(), 10) || 0;\r\n                    const percentStr = $(tds[3]).text().trim().replace('%', '');\r\n\r\n                    months.push({\r\n                        month,\r\n                        attended,\r\n                        total,\r\n                        percentage: parseFloat(percentStr) || 0\r\n                    });\r\n                }\r\n            });\r\n\r\n            return {\r\n                overallPercentage,\r\n                semesterTotal,\r\n                months\r\n            };\r\n\r\n        } catch (error) {\r\n            console.error('Attendance fetch error:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    getDateWiseAttendance: async (): Promise<DateWiseResponse> => {\r\n        try {\r\n            console.log('Fetching date-wise attendance...');\r\n            let response = await api.get('/Student/Date_wise_attendance.php');\r\n            let html = response.data;\r\n\r\n            if (html.includes('login.php') || html.includes('Enter Roll No') || html.includes('type=\"password\"')) {\r\n                console.log('Session expired (date-wise), re-authenticating...');\r\n                const credentials = await AuthService.getCredentials();\r\n                if (!credentials) throw new Error('Not logged in');\r\n\r\n                await AuthService.login(credentials.studentId, credentials.pass);\r\n\r\n                console.log('Retrying date-wise fetch...');\r\n                response = await api.get('/Student/Date_wise_attendance.php');\r\n                html = response.data;\r\n            }\r\n\r\n            const $ = cheerio.load(html);\r\n            const days: DailyAttendance[] = [];\r\n\r\n            // Parse attendance-table for date-wise data\r\n            $('.attendance-table').each((tableIndex: number, table: any) => {\r\n                $(table).find('tbody tr').each((i: number, row: any) => {\r\n                    const tds = $(row).find('td');\r\n                    if (tds.length >= 7) {\r\n                        const dateCell = $(tds[0]);\r\n                        const dateText = dateCell.find('strong').text().trim();\r\n                        const dayText = dateCell.find('small').text().trim();\r\n\r\n                        if (dateText) {\r\n                            const periods: string[] = [];\r\n                            // Skip first td (date) and second td (usually empty), get P1-P6\r\n                            for (let p = 2; p < 8 && p < tds.length; p++) {\r\n                                const cellText = $(tds[p]).text().trim();\r\n                                const cellClass = $(tds[p]).attr('class') || '';\r\n\r\n                                if (cellClass.includes('Present')) {\r\n                                    periods.push('P');\r\n                                } else if (cellClass.includes('absent')) {\r\n                                    periods.push('A');\r\n                                } else if (cellClass.includes('Not-posted') || cellText === '-') {\r\n                                    periods.push('-');\r\n                                } else {\r\n                                    periods.push(cellText || '-');\r\n                                }\r\n                            }\r\n\r\n                            // Pad to 6 periods if needed\r\n                            while (periods.length < 6) {\r\n                                periods.push('-');\r\n                            }\r\n\r\n                            days.push({\r\n                                date: dateText,\r\n                                day: dayText,\r\n                                periods: periods.slice(0, 6)\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n\r\n            console.log('Parsed days:', days.length);\r\n            return { days };\r\n\r\n        } catch (error) {\r\n            console.error('Date-wise attendance fetch error:', error);\r\n            throw error;\r\n        }\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\services\\auth.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":4,"column":17,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":4,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as SecureStore from 'expo-secure-store';\r\nimport api from './api';\r\n\r\nconst cheerio = require('react-native-cheerio');\r\n\r\nconst CREDENTIALS_KEY = 'user_credentials';\r\nconst PROFILE_KEY = 'user_profile';\r\n\r\nexport interface StudentProfile {\r\n    name: string;\r\n    rollNo: string;\r\n    department: string;\r\n    year: string;\r\n    profileImage: string;\r\n}\r\n\r\nexport const AuthService = {\r\n    login: async (studentId: string, pass: string) => {\r\n        try {\r\n            // Step 1: GET request to initialize session\r\n            console.log('Fetching login page...');\r\n            await api.get('/Student/login.php');\r\n\r\n            // Step 2: POST login credentials\r\n            const formData = new URLSearchParams();\r\n            formData.append('roll_no', studentId);\r\n            formData.append('password', pass);\r\n\r\n            console.log('Posting credentials...');\r\n            const loginResponse = await api.post('/Student/login.php', formData.toString(), {\r\n                maxRedirects: 5,\r\n                validateStatus: (status: number) => status >= 200 && status < 400,\r\n            });\r\n\r\n            // Extract and save cookie\r\n            const setCookie = loginResponse.headers['set-cookie'];\r\n            if (setCookie) {\r\n                const cookieStr = Array.isArray(setCookie) ? setCookie.join('; ') : setCookie;\r\n                console.log('Saving auth cookie...');\r\n                await SecureStore.setItemAsync('auth_cookie', cookieStr);\r\n            }\r\n\r\n            const responseText = loginResponse.data || '';\r\n            const isLoginPage = responseText.includes('login-form') ||\r\n                responseText.includes('Enter your Roll Number') ||\r\n                responseText.includes('Invalid Credentials');\r\n\r\n            const isSuccessPage = responseText.includes('Dashboard') ||\r\n                responseText.includes('Welcome') ||\r\n                responseText.includes('class=\"menu-link\"') ||\r\n                responseText.includes('logout');\r\n\r\n            if (isSuccessPage && !isLoginPage) {\r\n                // Parse profile info from the response\r\n                const $ = cheerio.load(responseText);\r\n\r\n                const name = $('#profileName').text().trim() || 'Student';\r\n                const rollNo = studentId;\r\n                const department = $('#profileDepartment').text().trim() || '';\r\n\r\n                // Extract year from the profile popup\r\n                let year = '';\r\n                $('p').each((i: number, el: any) => {\r\n                    const text = $(el).text();\r\n                    if (text.includes('Year:')) {\r\n                        const match = text.match(/Year:\\s*(\\d+)/);\r\n                        if (match) year = match[1];\r\n                    }\r\n                });\r\n\r\n                // Extract profile image\r\n                let profileImage = '';\r\n                const popupImg = $('.popup-img').attr('src') || $('img[alt=\"Profile\"]').attr('src');\r\n                if (popupImg) {\r\n                    profileImage = popupImg.startsWith('http')\r\n                        ? popupImg\r\n                        : `https://www.nrcmec.org/Student/${popupImg}`;\r\n                }\r\n\r\n                const profile: StudentProfile = {\r\n                    name,\r\n                    rollNo,\r\n                    department,\r\n                    year,\r\n                    profileImage\r\n                };\r\n\r\n                console.log('Profile extracted:', profile);\r\n\r\n                // Store credentials and profile\r\n                await SecureStore.setItemAsync(CREDENTIALS_KEY, JSON.stringify({ studentId, pass }));\r\n                await SecureStore.setItemAsync(PROFILE_KEY, JSON.stringify(profile));\r\n\r\n                return profile;\r\n            } else if (responseText.includes('Invalid Credentials') || responseText.includes('incorrect')) {\r\n                throw new Error('Invalid credentials. Please check your Roll Number and Password.');\r\n            } else {\r\n                throw new Error('Login failed. Please verify your credentials.');\r\n            }\r\n\r\n        } catch (error: any) {\r\n            console.error('Login error:', error.message || error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    logout: async () => {\r\n        console.log('AuthService: Logging out...');\r\n        try {\r\n            await SecureStore.deleteItemAsync(CREDENTIALS_KEY);\r\n            await SecureStore.deleteItemAsync(PROFILE_KEY);\r\n            // Clear auth cookie\r\n            await SecureStore.deleteItemAsync('auth_cookie');\r\n            console.log('AuthService: SecureStore cleared');\r\n        } catch (error) {\r\n            console.error('Error clearing secure store:', error);\r\n            // Even if delete fails, we should probably proceed to let the user \"logout\" locally\r\n        }\r\n    },\r\n\r\n    isLoggedIn: async () => {\r\n        const creds = await SecureStore.getItemAsync(CREDENTIALS_KEY);\r\n        return !!creds;\r\n    },\r\n\r\n    getCredentials: async () => {\r\n        const creds = await SecureStore.getItemAsync(CREDENTIALS_KEY);\r\n        return creds ? JSON.parse(creds) : null;\r\n    },\r\n\r\n    getProfile: async (): Promise<StudentProfile | null> => {\r\n        const profile = await SecureStore.getItemAsync(PROFILE_KEY);\r\n        return profile ? JSON.parse(profile) : null;\r\n    },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\bharat kumar\\OneDrive\\Desktop\\MarkIt\\utils\\storage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]